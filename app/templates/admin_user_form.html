{% extends "admin_base.html" %}

{% block title %}{{ 'Edit User' if user_form else 'Add User' }}{% endblock %}

{% block content %}
<div class="card">
    <h1 class="page-title">{{ 'Edit User (ID: ' + (user_form.id|string) + ')' if user_form else 'Add New User' }}</h1>

    <form method="post" action="{{ '/admin/user/' + (user_form.id|string) + '/edit' if user_form else '/admin/user/add' }}">
        <div class="form-grid">
            <div class="form-group">
                <label for="username">Username:</label>
                <input type="text" id="username" name="username" value="{{ user_form.username if user_form }}">
            </div>
            <div class="form-group">
                <label for="email">Email:</label>
                <input type="email" id="email" name="email" value="{{ user_form.email if user_form }}">
            </div>
            <div class="form-group">
                <label for="password">Password ({{ 'leave blank to keep current' if user_form else 'set for new user' }}):</label>
                <input type="password" id="password" name="password" placeholder="••••••••">
            </div>
            <div class="form-group">
                <label for="level">Level:</label>
                <input type="number" id="level" name="level" value="{{ user_form.level if user_form else 1 }}">
            </div>
            <div class="form-group">
                <label for="experience">Experience:</label>
                <input type="number" id="experience" name="experience" value="{{ user_form.experience if user_form else 0 }}">
            </div>
             <div class="form-group">
                <label for="client_provided_id">Client Provided ID:</label>
                <input type="text" id="client_provided_id" name="client_provided_id" value="{{ user_form.client_provided_id if user_form }}">
            </div>
             <div class="form-group">
                <label for="play_games_player_id">Play Games Player ID:</label>
                <input type="text" id="play_games_player_id" name="play_games_player_id" value="{{ user_form.play_games_player_id if user_form }}">
            </div>
            <div class="form-group">
                <label for="google_id">Google ID:</label>
                <input type="text" id="google_id" name="google_id" value="{{ user_form.google_id if user_form }}">
            </div>
        </div>
        <hr style="border: none; border-top: 1px solid var(--border-color); margin: 20px 0;">
        <div class="form-group checkbox-group">
            <input type="checkbox" id="is_active" name="is_active_form" value="true" {% if (user_form and user_form.is_active) or not user_form %}checked{% endif %}>
            <label for="is_active" style="display:inline; font-weight:normal;">Is Active</label>
        </div>
        <div class="form-group checkbox-group">
            <input type="checkbox" id="is_superuser" name="is_superuser_form" value="true" {% if user_form and user_form.is_superuser %}checked{% endif %}>
            <label for="is_superuser" style="display:inline; font-weight:normal;">Is Superuser (Admin)</label>
        </div>
        <div class="form-actions">
            <a href="/admin/users" class="btn btn-secondary">Cancel</a>
            <button type="submit" class="btn btn-primary">{{ 'Save Changes' if user_form else 'Create User' }}</button>
        </div>
    </form>
</div>
{% endblock %}